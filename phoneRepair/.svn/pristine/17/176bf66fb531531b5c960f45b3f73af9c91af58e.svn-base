define("login:static/js/des.js",function(r,a,e){function s(r,a,e,n){var s,f,m,i,t,l,k=r.length,u="";if(null!=a&&""!=a&&(s=o(a),i=s.length),null!=e&&""!=e&&(f=o(e),t=f.length),null!=n&&""!=n&&(m=o(n),l=m.length),k>0)if(4>k){var v,A=c(r);if(null!=a&&""!=a&&null!=e&&""!=e&&null!=n&&""!=n){var y,g,j,h;for(y=A,g=0;i>g;g++)y=w(y,s[g]);for(j=0;t>j;j++)y=w(y,f[j]);for(h=0;l>h;h++)y=w(y,m[h]);v=y}else if(null!=a&&""!=a&&null!=e&&""!=e){var y,g,j;for(y=A,g=0;i>g;g++)y=w(y,s[g]);for(j=0;t>j;j++)y=w(y,f[j]);v=y}else if(null!=a&&""!=a){var y,g=0;for(y=A,g=0;i>g;g++)y=w(y,s[g]);v=y}u=b(v)}else{var p=parseInt(k/4),I=k%4,C=0;for(C=0;p>C;C++){var v,d=r.substring(4*C+0,4*C+4),D=c(d);if(null!=a&&""!=a&&null!=e&&""!=e&&null!=n&&""!=n){var y,g,j,h;for(y=D,g=0;i>g;g++)y=w(y,s[g]);for(j=0;t>j;j++)y=w(y,f[j]);for(h=0;l>h;h++)y=w(y,m[h]);v=y}else if(null!=a&&""!=a&&null!=e&&""!=e){var y,g,j;for(y=D,g=0;i>g;g++)y=w(y,s[g]);for(j=0;t>j;j++)y=w(y,f[j]);v=y}else if(null!=a&&""!=a){var y,g;for(y=D,g=0;i>g;g++)y=w(y,s[g]);v=y}u+=b(v)}if(I>0){var v,E=r.substring(4*p+0,k),D=c(E);if(null!=a&&""!=a&&null!=e&&""!=e&&null!=n&&""!=n){var y,g,j,h;for(y=D,g=0;i>g;g++)y=w(y,s[g]);for(j=0;t>j;j++)y=w(y,f[j]);for(h=0;l>h;h++)y=w(y,m[h]);v=y}else if(null!=a&&""!=a&&null!=e&&""!=e){var y,g,j;for(y=D,g=0;i>g;g++)y=w(y,s[g]);for(j=0;t>j;j++)y=w(y,f[j]);v=y}else if(null!=a&&""!=a){var y,g;for(y=D,g=0;i>g;g++)y=w(y,s[g]);v=y}u+=b(v)}}return u}function f(r,a,e,n){var s,f,c,m,i,t,l=r.length,k="";null!=a&&""!=a&&(s=o(a),m=s.length),null!=e&&""!=e&&(f=o(e),i=f.length),null!=n&&""!=n&&(c=o(n),t=c.length);var b=parseInt(l/16),w=0;for(w=0;b>w;w++){var y=r.substring(16*w+0,16*w+16),g=v(y),j=new Array(64),h=0;for(h=0;64>h;h++)j[h]=parseInt(g.substring(h,h+1));var p;if(null!=a&&""!=a&&null!=e&&""!=e&&null!=n&&""!=n){var I,C,d,D;for(I=j,C=t-1;C>=0;C--)I=A(I,c[C]);for(d=i-1;d>=0;d--)I=A(I,f[d]);for(D=m-1;D>=0;D--)I=A(I,s[D]);p=I}else if(null!=a&&""!=a&&null!=e&&""!=e){var I,C,d,D;for(I=j,C=i-1;C>=0;C--)I=A(I,f[C]);for(d=m-1;d>=0;d--)I=A(I,s[d]);p=I}else if(null!=a&&""!=a){var I,C,d,D;for(I=j,C=m-1;C>=0;C--)I=A(I,s[C]);p=I}k+=u(p)}return k}function o(r){var a=new Array,e=r.length,n=parseInt(e/4),s=e%4,f=0;for(f=0;n>f;f++)a[f]=c(r.substring(4*f+0,4*f+4));return s>0&&(a[f]=c(r.substring(4*f+0,e))),a}function c(r){var a=r.length,e=new Array(64);if(4>a){var n=0,s=0,f=0,o=0;for(n=0;a>n;n++){var c=r.charCodeAt(n);for(s=0;16>s;s++){var m=1,i=0;for(i=15;i>s;i--)m*=2;e[16*n+s]=parseInt(c/m)%2}}for(f=a;4>f;f++){var c=0;for(o=0;16>o;o++){var m=1,i=0;for(i=15;i>o;i--)m*=2;e[16*f+o]=parseInt(c/m)%2}}}else for(n=0;4>n;n++){var c=r.charCodeAt(n);for(s=0;16>s;s++){var m=1;for(i=15;i>s;i--)m*=2;e[16*n+s]=parseInt(c/m)%2}}return e}function t(r){var a;switch(r){case"0000":a="0";break;case"0001":a="1";break;case"0010":a="2";break;case"0011":a="3";break;case"0100":a="4";break;case"0101":a="5";break;case"0110":a="6";break;case"0111":a="7";break;case"1000":a="8";break;case"1001":a="9";break;case"1010":a="A";break;case"1011":a="B";break;case"1100":a="C";break;case"1101":a="D";break;case"1110":a="E";break;case"1111":a="F"}return a}function l(r){var a;switch(r){case"0":a="0000";break;case"1":a="0001";break;case"2":a="0010";break;case"3":a="0011";break;case"4":a="0100";break;case"5":a="0101";break;case"6":a="0110";break;case"7":a="0111";break;case"8":a="1000";break;case"9":a="1001";break;case"A":a="1010";break;case"B":a="1011";break;case"C":a="1100";break;case"D":a="1101";break;case"E":a="1110";break;case"F":a="1111"}return a}function u(r){var a="";for(i=0;4>i;i++){var e=0;for(j=0;16>j;j++){var n=1;for(m=15;m>j;m--)n*=2;e+=r[16*i+j]*n}0!=e&&(a+=String.fromCharCode(e))}return a}function b(r){var a="";for(i=0;16>i;i++){var e="";for(j=0;4>j;j++)e+=r[4*i+j];a+=t(e)}return a}function v(r){var a="";for(i=0;16>i;i++)a+=l(r.substring(i,i+1));return a}function w(r,a){var e=D(a),n=y(r),s=new Array(32),f=new Array(32),o=new Array(32),c=0,m=0,i=0,t=0,l=0;for(i=0;32>i;i++)s[i]=n[i],f[i]=n[32+i];for(c=0;16>c;c++){for(m=0;32>m;m++)o[m]=s[m],s[m]=f[m];var k=new Array(48);for(t=0;48>t;t++)k[t]=e[c][t];var u=h(I(p(h(g(f),k))),o);for(l=0;32>l;l++)f[l]=u[l]}var b=new Array(64);for(c=0;32>c;c++)b[c]=f[c],b[32+c]=s[c];return C(b)}function A(r,a){var e=D(a),n=y(r),s=new Array(32),f=new Array(32),o=new Array(32),c=0,m=0,i=0,t=0,l=0;for(i=0;32>i;i++)s[i]=n[i],f[i]=n[32+i];for(c=15;c>=0;c--){for(m=0;32>m;m++)o[m]=s[m],s[m]=f[m];var k=new Array(48);for(t=0;48>t;t++)k[t]=e[c][t];var u=h(I(p(h(g(f),k))),o);for(l=0;32>l;l++)f[l]=u[l]}var b=new Array(64);for(c=0;32>c;c++)b[c]=f[c],b[32+c]=s[c];return C(b)}function y(r){var a=new Array(64);for(i=0,m=1,n=0;4>i;i++,m+=2,n+=2)for(j=7,k=0;j>=0;j--,k++)a[8*i+k]=r[8*j+m],a[8*i+k+32]=r[8*j+n];return a}function g(r){var a=new Array(48);for(i=0;8>i;i++)a[6*i+0]=0==i?r[31]:r[4*i-1],a[6*i+1]=r[4*i+0],a[6*i+2]=r[4*i+1],a[6*i+3]=r[4*i+2],a[6*i+4]=r[4*i+3],a[6*i+5]=7==i?r[0]:r[4*i+4];return a}function h(r,a){var e=new Array(r.length);for(i=0;i<r.length;i++)e[i]=r[i]^a[i];return e}function p(r){var a=new Array(32),e="",n=[[14,4,13,1,2,15,11,8,3,10,6,12,5,9,0,7],[0,15,7,4,14,2,13,1,10,6,12,11,9,5,3,8],[4,1,14,8,13,6,2,11,15,12,9,7,3,10,5,0],[15,12,8,2,4,9,1,7,5,11,3,14,10,0,6,13]],s=[[15,1,8,14,6,11,3,4,9,7,2,13,12,0,5,10],[3,13,4,7,15,2,8,14,12,0,1,10,6,9,11,5],[0,14,7,11,10,4,13,1,5,8,12,6,9,3,2,15],[13,8,10,1,3,15,4,2,11,6,7,12,0,5,14,9]],f=[[10,0,9,14,6,3,15,5,1,13,12,7,11,4,2,8],[13,7,0,9,3,4,6,10,2,8,5,14,12,11,15,1],[13,6,4,9,8,15,3,0,11,1,2,12,5,10,14,7],[1,10,13,0,6,9,8,7,4,15,14,3,11,5,2,12]],o=[[7,13,14,3,0,6,9,10,1,2,8,5,11,12,4,15],[13,8,11,5,6,15,0,3,4,7,2,12,1,10,14,9],[10,6,9,0,12,11,7,13,15,1,3,14,5,2,8,4],[3,15,0,6,10,1,13,8,9,4,5,11,12,7,2,14]],c=[[2,12,4,1,7,10,11,6,8,5,3,15,13,0,14,9],[14,11,2,12,4,7,13,1,5,0,15,10,3,9,8,6],[4,2,1,11,10,13,7,8,15,9,12,5,6,3,0,14],[11,8,12,7,1,14,2,13,6,15,0,9,10,4,5,3]],i=[[12,1,10,15,9,2,6,8,0,13,3,4,14,7,5,11],[10,15,4,2,7,12,9,5,6,1,13,14,0,11,3,8],[9,14,15,5,2,8,12,3,7,0,4,10,1,13,11,6],[4,3,2,12,9,5,15,10,11,14,1,7,6,0,8,13]],t=[[4,11,2,14,15,0,8,13,3,12,9,7,5,10,6,1],[13,0,11,7,4,9,1,10,14,3,5,12,2,15,8,6],[1,4,11,13,12,3,7,14,10,15,6,8,0,5,9,2],[6,11,13,8,1,4,10,7,9,5,0,15,14,2,3,12]],l=[[13,2,8,4,6,15,11,1,10,9,3,14,5,0,12,7],[1,15,13,8,10,3,7,4,12,5,6,11,0,14,9,2],[7,11,4,1,9,12,14,2,0,6,10,13,15,3,5,8],[2,1,14,7,4,10,8,13,15,12,9,0,3,5,6,11]];for(m=0;8>m;m++){var k=0,u=0;switch(k=2*r[6*m+0]+r[6*m+5],u=2*r[6*m+1]*2*2+2*r[6*m+2]*2+2*r[6*m+3]+r[6*m+4],m){case 0:e=d(n[k][u]);break;case 1:e=d(s[k][u]);break;case 2:e=d(f[k][u]);break;case 3:e=d(o[k][u]);break;case 4:e=d(c[k][u]);break;case 5:e=d(i[k][u]);break;case 6:e=d(t[k][u]);break;case 7:e=d(l[k][u])}a[4*m+0]=parseInt(e.substring(0,1)),a[4*m+1]=parseInt(e.substring(1,2)),a[4*m+2]=parseInt(e.substring(2,3)),a[4*m+3]=parseInt(e.substring(3,4))}return a}function I(r){var a=new Array(32);return a[0]=r[15],a[1]=r[6],a[2]=r[19],a[3]=r[20],a[4]=r[28],a[5]=r[11],a[6]=r[27],a[7]=r[16],a[8]=r[0],a[9]=r[14],a[10]=r[22],a[11]=r[25],a[12]=r[4],a[13]=r[17],a[14]=r[30],a[15]=r[9],a[16]=r[1],a[17]=r[7],a[18]=r[23],a[19]=r[13],a[20]=r[31],a[21]=r[26],a[22]=r[2],a[23]=r[8],a[24]=r[18],a[25]=r[12],a[26]=r[29],a[27]=r[5],a[28]=r[21],a[29]=r[10],a[30]=r[3],a[31]=r[24],a}function C(r){var a=new Array(64);return a[0]=r[39],a[1]=r[7],a[2]=r[47],a[3]=r[15],a[4]=r[55],a[5]=r[23],a[6]=r[63],a[7]=r[31],a[8]=r[38],a[9]=r[6],a[10]=r[46],a[11]=r[14],a[12]=r[54],a[13]=r[22],a[14]=r[62],a[15]=r[30],a[16]=r[37],a[17]=r[5],a[18]=r[45],a[19]=r[13],a[20]=r[53],a[21]=r[21],a[22]=r[61],a[23]=r[29],a[24]=r[36],a[25]=r[4],a[26]=r[44],a[27]=r[12],a[28]=r[52],a[29]=r[20],a[30]=r[60],a[31]=r[28],a[32]=r[35],a[33]=r[3],a[34]=r[43],a[35]=r[11],a[36]=r[51],a[37]=r[19],a[38]=r[59],a[39]=r[27],a[40]=r[34],a[41]=r[2],a[42]=r[42],a[43]=r[10],a[44]=r[50],a[45]=r[18],a[46]=r[58],a[47]=r[26],a[48]=r[33],a[49]=r[1],a[50]=r[41],a[51]=r[9],a[52]=r[49],a[53]=r[17],a[54]=r[57],a[55]=r[25],a[56]=r[32],a[57]=r[0],a[58]=r[40],a[59]=r[8],a[60]=r[48],a[61]=r[16],a[62]=r[56],a[63]=r[24],a}function d(r){var a="";switch(r){case 0:a="0000";break;case 1:a="0001";break;case 2:a="0010";break;case 3:a="0011";break;case 4:a="0100";break;case 5:a="0101";break;case 6:a="0110";break;case 7:a="0111";break;case 8:a="1000";break;case 9:a="1001";break;case 10:a="1010";break;case 11:a="1011";break;case 12:a="1100";break;case 13:a="1101";break;case 14:a="1110";break;case 15:a="1111"}return a}function D(r){var a=new Array(56),e=new Array;e[0]=new Array,e[1]=new Array,e[2]=new Array,e[3]=new Array,e[4]=new Array,e[5]=new Array,e[6]=new Array,e[7]=new Array,e[8]=new Array,e[9]=new Array,e[10]=new Array,e[11]=new Array,e[12]=new Array,e[13]=new Array,e[14]=new Array,e[15]=new Array;var n=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];for(s=0;7>s;s++)for(j=0,k=7;8>j;j++,k--)a[8*s+j]=r[8*k+s];var s=0;for(s=0;16>s;s++){var f=0,o=0;for(j=0;j<n[s];j++){for(f=a[0],o=a[28],k=0;27>k;k++)a[k]=a[k+1],a[28+k]=a[29+k];a[27]=f,a[55]=o}var c=new Array(48);switch(c[0]=a[13],c[1]=a[16],c[2]=a[10],c[3]=a[23],c[4]=a[0],c[5]=a[4],c[6]=a[2],c[7]=a[27],c[8]=a[14],c[9]=a[5],c[10]=a[20],c[11]=a[9],c[12]=a[22],c[13]=a[18],c[14]=a[11],c[15]=a[3],c[16]=a[25],c[17]=a[7],c[18]=a[15],c[19]=a[6],c[20]=a[26],c[21]=a[19],c[22]=a[12],c[23]=a[1],c[24]=a[40],c[25]=a[51],c[26]=a[30],c[27]=a[36],c[28]=a[46],c[29]=a[54],c[30]=a[29],c[31]=a[39],c[32]=a[50],c[33]=a[44],c[34]=a[32],c[35]=a[47],c[36]=a[43],c[37]=a[48],c[38]=a[38],c[39]=a[55],c[40]=a[33],c[41]=a[52],c[42]=a[45],c[43]=a[41],c[44]=a[49],c[45]=a[35],c[46]=a[28],c[47]=a[31],s){case 0:for(m=0;48>m;m++)e[0][m]=c[m];break;case 1:for(m=0;48>m;m++)e[1][m]=c[m];break;case 2:for(m=0;48>m;m++)e[2][m]=c[m];break;case 3:for(m=0;48>m;m++)e[3][m]=c[m];break;case 4:for(m=0;48>m;m++)e[4][m]=c[m];break;case 5:for(m=0;48>m;m++)e[5][m]=c[m];break;case 6:for(m=0;48>m;m++)e[6][m]=c[m];break;case 7:for(m=0;48>m;m++)e[7][m]=c[m];break;case 8:for(m=0;48>m;m++)e[8][m]=c[m];break;case 9:for(m=0;48>m;m++)e[9][m]=c[m];break;case 10:for(m=0;48>m;m++)e[10][m]=c[m];break;case 11:for(m=0;48>m;m++)e[11][m]=c[m];break;case 12:for(m=0;48>m;m++)e[12][m]=c[m];break;case 13:for(m=0;48>m;m++)e[13][m]=c[m];break;case 14:for(m=0;48>m;m++)e[14][m]=c[m];break;case 15:for(m=0;48>m;m++)e[15][m]=c[m]}}return e}var E={strEnc:s,strDec:f};e.exports=E});
//# sourceMappingURL=/static/login/js/des.map
;define("login:static/js/login.js",function(e,o,t){var n=e("component:components/jquery/jquery.js"),i=e("component:components/declare/declare.js"),a=e("component:components/lbc-frame/js/baseModule.js"),s=(e("component:components/lbc-frame/js/init.js"),e("component:components/dp-monitor/dp.js")),r=(e("component:components/jquery-ui-pbox/pbox.js"),e("component:components/lbc-frame/js/api.js"));e("component:components/lbc-iajax/iAjax.js"),e("component:components/lbc-slide/slide.js");var c=i(a,{requireId:"login:static/js/login.js",api:{getMsCode:"/api/ext/user/sms/secGetCode",getLoginUser:"/api/ext/user/getLoginUser"},init:function(){n(".add-area").lbcSlide({width:1440,height:428,hasAnimate:!0,animation:"fade",isAutoScroll:!0}),n(".login-tab-head").on("click",function(e){var o=n(e.currentTarget),t=o.attr("href");return n(".login-tab-head").removeClass("cur"),o.addClass("cur"),n(".login-tab-cnt").hide(),n(t).show(),!1}),this.initUC(),this.initPhoneLogin(),this.statAdCount()},statAdCount:function(){var e=s.customCount("loginAd1"),o=s.customCount("loginAd2"),t=s.customCount("loginAd3");n(".carousel").on("click",function(i){var a=n(i.currentTarget),r=a.attr("id");switch(r){case"login-ad1":s.customCount(e);break;case"login-ad2":s.customCount(o);break;case"login-ad3":s.customCount(t)}})},initUC:function(){var e=this,o=window.location.protocol;ucCommonLogin.init({container:"login-acccount",defaultCss:0,appid:316,product:"nuomi",staticPage:o+"//mct.y.nuomi.com/static/login/html/v3Jump.html",fromu:o+"//y.nuomi.com",multiLogin:0,isSmall:1,isLayer:0,isAutoLogin:1,beforeSubmit:function(){var e=n("#uc-login");e.find(".error").html("");var o=n("#uc-common-account"),t=n.trim(o.val());return/@/.test(t)||o.val(t+"@y.com"),!0},rendered:function(){var o=n("#uc-login");o.find("h2").remove();var t=n("#is-auto-login"),i=n('<label class="checkbox"></label>');$isAutoLoginContainer=n("#is-auto-login-container"),$isAutoLoginContainer.append(i),i.append(t),i.append('<span class="icon"></span> 记住账户'),$isAutoLoginContainer.find("label").first().hide();var a=n('<div class="protocol"><a href="/login/protocol" target="_blank">同意并接受商户协议</a></div>');o.find(".other .fl").empty().append(a);var s=o.find(".other .fr");o.find(".is-auto-login").append(s),o.find(".is-auto-login .fr a").attr("href","/mct/findPwd/index?page=true"),e.initLoginBox();var c=(r.path.params(),r.path.params("username"));c&&n("#uc-common-account").val(c),n("#ucsl-password-edit").css("padding-left","10px"),o.find(".other").append('<div class="fr"><a href="/api/ext/user/registerPage?viewType=3" target="_blank">免费入驻</a></div>'),o.find(".submit").val("登  录")},success:function(){n.post("/api/accessRecord/saveToPcLogin",{userName:n("#uc-common-account").val(),resultType:0}).always(function(){window.location.href=location.protocol+"//mct.y.nuomi.com/index?page=true"})},fail:function(){var e=n("#account-error").text(),o=n("#password-error").text(),t=n("#token-error").text(),i=[];e&&i.push(e),o&&i.push(o),t&&i.push(t),n.post("/api/accessRecord/saveToPcLogin",{userName:n("#uc-common-account").val(),resultType:-1,failReason:i.join(",")})}})},initLoginBox:function(){var e=n(".login-content-box").height(),o=n(".login-area").innerHeight();n(".login-box").css("top",(e-o)/2+"px")},initPhoneLogin:function(){this.$errorPhone=n(".error-phone"),this.$errorVerifyCode=n(".error-verify-code"),this.$phoneNum=n("#phone-number"),this.$verifyCode=n(".verify-code"),this.$imgCode=n(".img-verify-code img"),this.$imgTip=n(".error-img-verify-code");var e=window.location.protocol,o=e+"//mct.y.nuomi.com/static/login/html/phoneJump.html";n("#selfu").val(o),n("#fromu").val(o),n(".verify-btn").on("click",n.proxy(this.getSmsCode,this)),n(".submit-btn-phone").on("click",n.proxy(this.getLoginUser,this)),n(document).on("click",".choose-account",n.proxy(this.setLoginAccount,this)),this.$imgCode.on("click",n.proxy(this.getImgCode,this)),this.$imgCode.trigger("click")},getImgCode:function(e){n(e.target).attr("src","/api/patchca/png/"+(new Date).getTime())},getSmsCode:function(e){function o(){n(".verify-img").trigger("click"),n(".img-verify-code-input").val("")}var t=n(e.target),i=/^1\d{10}$/,a=n.trim(this.$phoneNum.val()),s=n(".error-phone"),r=this,c=n(".img-verify-code-input"),l=n.trim(c.val()),u=this.$imgTip;if(!a)return s.text("请输入手机号"),!1;if(!i.test(a))return s.text("手机号格式错误，请输入11位手机号"),!1;if(s.text(""),!l||4!=l.length)return u.text("请输入正确图片验证码").show(),!1;if(u.hide(),!t.hasClass("sending")){t.addClass("sending").val("重新发送(60S)");var d=60,p=setInterval(function(){t.val("重新发送("+--d+"S)"),0>=d&&(clearInterval(p),t.removeClass("sending").prop("disabled",!1).removeClass("disabled").val("重新获取验证码"))},1e3);t.iAjax({url:r.api.getMsCode,type:"post",data:{appId:1,phone:a,expiredTime:1800,tokenCode:l,funcName:"login"},success:function(){t.prop("disabled",!0),n(".send-times-error").text("")},errorHandle:function(e,n){clearInterval(p),t.removeClass("sending").prop("disabled",!1).removeClass("disabled").val("获取验证码"),o(),s.text(n.info||n.msg)},error:function(){clearInterval(p),t.removeClass("sending").prop("disabled",!1).removeClass("disabled").val("获取验证码"),o(),s.text("获取短信验证码失败")}})}},getLoginUser:function(e){var o=n(e.target),t=this,i=n.trim(this.$phoneNum.val()),a=n.trim(this.$verifyCode.val());return this.$errorPhone.text(i?"":"手机号不能为空"),this.$errorVerifyCode.text(a?"":"验证码不能为空"),i&&a&&(o.text("登录中..."),o.iAjax({url:t.api.getLoginUser,type:"post",data:{appId:1,phone:i,code:a,funcName:"login",srcType:1},success:function(e){o.text("登录");var a=e.userInfo;if(a&&a.length>0)if(1==a.length)if(1===a[0].isNoPwdLogin)t.loginByAccount(e.userInfo[0],e.smsToken);else{var s=n("#ztc-info-dialog"),r=s.find(".account-info-list"),c=s.pbox({width:400,modal:!0,resizable:!1,title:"提示",buttons:[]});c.open(function(){r.html("");var e=n('<div class="account-info ztc">账号：<span class="sub-account">'+a[0].userName+'</span><p class="gray">直通车账号暂不支持手机登录，请使用账号密码登录</p></div>');r.append(e)})}else{var l=n("#account-info-dialog"),u=l.find(".account-info-list"),d=l.pbox({width:400,modal:!0,resizable:!1,title:"提示",buttons:[]});d.open(function(){u.html(""),n(a).each(function(){var o="";1===this.isNoPwdLogin?(o=n('<div class="account-info">账号：<span class="sub-account">'+this.userName+'</span><button class="btn btn-major-min choose-account" type="submit">选择账号并登录</button></div>'),o.data("userInfo",this),o.data("smsToken",e.smsToken)):o=n('<div class="account-info ztc">账号：<span class="sub-account">'+this.userName+'</span><p class="gray">直通车账号暂不支持手机登录，请使用账号密码登录</p></div>'),u.append(o)})})}else{var p=n("#unbind-account-dialog"),m=p.pbox({width:350,modal:!0,resizable:!1,title:"提示",buttons:[]});m.open(function(){n(".bind-account").on("click",function(){window.location.href="/api/ext/user/bindUserPage?viewType=3&funcName=login&phone="+i+"&smsToken="+e.smsToken}),n(".register").on("click",function(){window.location.href="/api/ext/user/registerPage?viewType=3"})})}},errorHandle:function(e,n){o.text("登录"),t.$errorPhone.text(n.info)},error:function(){o.text("登录"),t.$errorPhone.text("请求失败，请重试")}})),!1},setLoginAccount:function(e){var o=n(e.currentTarget),t=o.closest(".account-info"),i=(t.find(".sub-account").text(),t.data("userInfo")),a=t.data("smsToken");this.loginByAccount(i,a)},loginByAccount:function(e,o){n("#userName").val(e.userName),n("#smsToken").val(o),n("#phone-number-hidden").val(n.trim(this.$phoneNum.val())),n("#is-auto-login-hidden").val(n("#is-auto-login-phone").val()),n("#login-phone-submit-form").trigger("submit")},destroy:function(){}});window.phoneCallback=function(e){var o=n(".error-phone");if(e.errno&&e.e){switch(e.errno){case"131":o.text("验证码错误");break;case"132":o.text("请先修改密码再使用手机号登录");break;case"500":o.text("未知错误");break;case"502":o.text("参数错误");break;case"600":o.text("业务系统不允许登录");break;default:o.text("登陆超时异常")}n.post("/api/accessRecord/saveToPcLogin",{userName:n("#userName").val(),resultType:e.errno,srcType:2})}else e.redirecturl&&n.post("/api/accessRecord/saveToPcLogin",{userName:n("#userName").val(),resultType:0,srcType:2}).always(function(){window.location.href=location.protocol+"//mct.y.nuomi.com/index?page=true"})},t.exports=new c});
//# sourceMappingURL=/static/login/js/login.map
;define("login:static/js/newLogin.js",function(e,o,t){var i=e("component:components/jquery/jquery.js"),n=e("component:components/declare/declare.js"),r=e("component:components/lbc-frame/js/baseModule.js"),a=(e("component:components/lbc-frame/js/init.js"),e("component:components/dp-monitor/dp.js")),s=e("component:components/jquery-ui-pbox/pbox.js"),c=(e("component:components/lbc-frame/js/api.js"),e("login:static/js/des.js"));e("component:components/lbc-verification-code/verificationCode.js"),e("component:components/jquery-cookie/jquery.cookie.js"),e("component:components/jquery-form-validator/main.js"),e("component:components/lbc-iajax/iAjax.js"),e("component:components/lbc-slide/slide.js");var l=n(r,{requireId:"login:static/js/newLogin.js",api:{getMsCode:"/api/ext/user/sms/secGetCode",getLoginUser:"/api/ext/user/getLoginUser",getReqsk:"/component/reqsk",login:"/login/phone"},init:function(){i(".add-area").lbcSlide({width:1440,height:428,hasAnimate:!0,animation:"fade",isAutoScroll:!0}),i(".login-tab-head").on("click",function(e){var o=i(e.currentTarget),t=o.attr("href");return i(".login-tab-head").removeClass("cur"),o.addClass("cur"),i(".login-tab-cnt").hide(),i(t).show(),!1}),this.compatibleIE(),this.initVariable(),this.initAccountLogin(),this.initPhoneLogin(),this.statAdCount()},compatibleIE:function(){if(i.browser.msie&&i.browser.version<=9){var e=(i("input[placeholder]"),i(".input-label"));e.show(),i(".login-area").on("focus","input[placeholder]",function(e){i(e.target).prev().hide()}),i(".login-area").on("blur","input[placeholder]",function(e){var o=i(e.target),t=o.prev(),n=i.trim(o.val());""==n&&t.show()}),i(".login-area").on("click","label",function(e){i(e.target).next().trigger("focus")})}},createPlacehoder:function(){if(i.browser.msie&&i.browser.version<=9){var e=i("#login-acccount #uc-login .token .verify-code-input"),o=e.attr("placeholder"),t=e.prev("label");0==t.length&&(t=i('<label class="input-label">'+o+"</label>"),t.insertBefore(e),t.show())}},initVariable:function(){this.$form=i("#uc-login"),this.$userName=i("input[name=userName]",this.$form),this.$password=i("input[name=enteredPwd]",this.$form),this.$autoLogin=i("input[name=isAutoLogin]",this.$form),this.$userNameError=i("#account-error",this.$form),this.$passwordError=i("#password-error",this.$form);var e=window.location.protocol,o=e+"//mct.y.nuomi.com/static/login/html/v3Jump.html";i("#selfu",this.$form).val(o),i("#fromu",this.$form).val(o)},statAdCount:function(){var e=a.customCount("loginAd1"),o=a.customCount("loginAd2"),t=a.customCount("loginAd3");i(".carousel").on("click",function(n){var r=i(n.currentTarget),s=r.attr("id");switch(s){case"login-ad1":a.customCount(e);break;case"login-ad2":a.customCount(o);break;case"login-ad3":a.customCount(t)}})},initAccountLogin:function(){var e=this;this.ticket="";var o=i("#login-error");this.codeCookie=i.cookie("mct_capt"),this.codeCookie?(i("#common-login").css("padding-top","0"),i("#login-acccount #uc-login .token").verificationCode({container:"#login-acccount #uc-login .token",width:250,height:60,codeWidth:98,codeClass:"verify-code-input",imgWidth:120,imgClass:"code-img-class",success:function(o){e.ticket=o.ticket,i("#uc-login #submit-form").prop("disabled",!1)}}),this.createPlacehoder()):i("#common-login").css("padding-top","30px"),this.$autoLogin.on("click",function(){e.$autoLogin.val(e.$autoLogin.is(":checked")?1:0)}),this.$userName.on("blur",function(){var o=i.trim(i(this).val());""==o||(/@/.test(o)||e.$userName.val(o+"@y.com"),e.$userNameError.hide())}),i("input",this.$form).on("focus",function(e){var t=i(e.target),n=o.text();"请输入验证码"==n||"验证码错误"==n?t.hasClass("verify-code-input")&&o.text(""):"用户名密码错误，请重新输入或 找回密码"==n?t.hasClass("verify-code-input")||o.text(""):o.text("")}),i("#submit-form",this.$form).on("click",function(){var o=i(this);return o.prop("disabled",!0),e.verifyForm()?(e.loginByUserAccount(o),!1):(o.prop("disabled",!1),e.resetVerificationCode(),!1)}),i("#login-acccount").on("loadVerifyCode",function(){i("#common-login").css("padding-top","0");var o=i("#login-acccount #uc-login .token"),t=i("#verify-token-container",o);0===t.length&&(o.verificationCode({container:"#login-acccount #uc-login .token",width:250,codeWidth:98,codeClass:"verify-code-input",imgWidth:120,imgClass:"code-img-class",height:60,success:function(o){e.ticket=o.ticket,i("#uc-login #submit-form").prop("disabled",!1)}}),e.createPlacehoder())})},resetVerificationCode:function(){i("#verify-token-container").trigger("click"),i("#verify-token-container input").val("")},verifyForm:function(){var e=this,o=!0,t=i.trim(this.$userName.val()),n=i.trim(this.$password.val());t=t.replace(/\s/g,""),n=n.replace(/\s/g,"");var r=t.toLowerCase().split("@"),a=i("#verify-token-container input",e.$form),s="";return""==t?(e.$userNameError.text("请输入用户名").show(),o=!1):2==r.length&&""!=r[1]?(o=i.formUtils.validators.validate_domain.validatorFunction(r[1])&&!/[^\w\+\.\-]/.test(r[0])&&r[0].length>0,o?e.$userNameError.hide():e.$userNameError.text("您输入的账号格式有误").show()):(e.$userNameError.text("您输入的账号格式有误").show(),o=!1),""==n?(e.$passwordError.text("请输入密码").show(),o=!1):n.length<8?(e.$passwordError.text("密码长度不少于8位").show(),o=!1):e.$passwordError.hide(),e.codeCookie&&(s=a.val(),s||(i("#verify-token-container .error-message").text("请输入验证码").show(),o=!1)),o},loginByUserAccount:function(e){var o=this,t=o.$form.serializeArray(),n=i("#uc-login-form-hidden"),r={};i.each(t,function(e,o){r[o.name]=i.trim(o.value)}),r.userName=r.userName.replace(/\s/g,""),r.enteredPwd=r.enteredPwd.replace(/\s/g,""),o.codeCookie&&!o.ticket&&(i("#verify-token-container .error-message").text("请输入正确的验证码").show(),e.prop("disabled",!1),o.resetVerificationCode()),r.cptTicket=o.ticket,r.type=1,o.getEncryptionSalt().done(function(t){if(0===t.code&&t.data){var a=t.data.salt;r.sid=t.data.sid,a?(r.enteredPwd=c.strEnc(r.enteredPwd,a,"",""),i.each(r,function(e,o){n.find("input[name="+e+"]").val(o)}),n.trigger("submit")):(s.alert(t.msg||"请求超时，请重试"),e.prop("disabled",!1),o.resetVerificationCode())}else s.alert(t.msg||"请求超时，请重试"),e.prop("disabled",!1),o.resetVerificationCode()})},getEncryptionSalt:function(){return i.iPost(this.api.getReqsk,{funcName:"login",channel:1})},initLoginBox:function(){var e=i(".login-content-box").height(),o=i(".login-area").innerHeight();i(".login-box").css("top",(e-o)/2+"px")},initPhoneLogin:function(){this.$errorPhone=i(".error-phone"),this.$errorVerifyCode=i(".error-verify-code"),this.$phoneNum=i("#phone-number"),this.$verifyCode=i(".verify-code"),this.$imgCode=i(".img-verify-code img"),this.$imgTip=i(".error-img-verify-code");var e=window.location.protocol,o=e+"//mct.y.nuomi.com/static/login/html/phoneJump.html";i("#login-phone #selfu").val(o),i("#login-phone #fromu").val(o),i(".verify-btn").on("click",i.proxy(this.getSmsCode,this)),i(".submit-btn-phone").on("click",i.proxy(this.getLoginUser,this)),i(document).on("click",".choose-account",i.proxy(this.setLoginAccount,this)),this.$imgCode.on("click",i.proxy(this.getImgCode,this)),this.$imgCode.trigger("click")},getImgCode:function(e){i(e.target).attr("src","/api/patchca/png/"+(new Date).getTime())},getSmsCode:function(e){function o(){i(".verify-img").trigger("click"),i(".img-verify-code-input").val("")}var t=i(e.target),n=/^1\d{10}$/,r=i.trim(this.$phoneNum.val()),a=i(".error-phone"),s=this,c=i(".img-verify-code-input"),l=i.trim(c.val()),u=this.$imgTip;if(!r)return a.text("请输入手机号"),!1;if(!n.test(r))return a.text("手机号格式错误，请输入11位手机号"),!1;if(a.text(""),!l||4!=l.length)return u.text("请输入正确图片验证码").show(),!1;if(u.hide(),!t.hasClass("sending")){t.addClass("sending").val("重新发送(60S)");var d=60,m=setInterval(function(){t.val("重新发送("+--d+"S)"),0>=d&&(clearInterval(m),t.removeClass("sending").prop("disabled",!1).removeClass("disabled").val("重新获取验证码"))},1e3);t.iAjax({url:s.api.getMsCode,type:"post",data:{appId:1,phone:r,expiredTime:1800,tokenCode:l,funcName:"login"},success:function(){t.prop("disabled",!0),i(".send-times-error").text("")},errorHandle:function(e,i){clearInterval(m),t.removeClass("sending").prop("disabled",!1).removeClass("disabled").val("获取验证码"),o(),a.text(i.info||i.msg)},error:function(){clearInterval(m),t.removeClass("sending").prop("disabled",!1).removeClass("disabled").val("获取验证码"),o(),a.text("获取短信验证码失败")}})}},getLoginUser:function(e){var o=i(e.target),t=this,n=i.trim(this.$phoneNum.val()),r=i.trim(this.$verifyCode.val());return this.$errorPhone.text(n?"":"手机号不能为空"),this.$errorVerifyCode.text(r?"":"验证码不能为空"),n&&r&&(o.text("登录中..."),o.iAjax({url:t.api.getLoginUser,type:"post",data:{appId:1,phone:n,code:r,funcName:"login",srcType:1},success:function(e){o.text("登录");var r=e.userInfo;if(r&&r.length>0)if(1==r.length)if(1===r[0].isNoPwdLogin)t.loginByAccount(e.userInfo[0],e.smsToken);else{var a=i("#ztc-info-dialog"),s=a.find(".account-info-list"),c=a.pbox({width:400,modal:!0,resizable:!1,title:"提示",buttons:[]});c.open(function(){s.html("");var e=i('<div class="account-info ztc">账号：<span class="sub-account">'+r[0].userName+'</span><p class="gray">直通车账号暂不支持手机登录，请使用账号密码登录</p></div>');s.append(e)})}else{var l=i("#account-info-dialog"),u=l.find(".account-info-list"),d=l.pbox({width:400,modal:!0,resizable:!1,title:"提示",buttons:[]});d.open(function(){u.html(""),i(r).each(function(){var o="";1===this.isNoPwdLogin?(o=i('<div class="account-info">账号：<span class="sub-account">'+this.userName+'</span><button class="btn btn-major-min choose-account" type="submit">选择账号并登录</button></div>'),o.data("userInfo",this),o.data("smsToken",e.smsToken)):o=i('<div class="account-info ztc">账号：<span class="sub-account">'+this.userName+'</span><p class="gray">直通车账号暂不支持手机登录，请使用账号密码登录</p></div>'),u.append(o)})})}else{var m=i("#unbind-account-dialog"),p=m.pbox({width:350,modal:!0,resizable:!1,title:"提示",buttons:[]});p.open(function(){i(".bind-account").on("click",function(){window.location.href="/api/ext/user/bindUserPage?viewType=3&funcName=login&phone="+n+"&smsToken="+e.smsToken}),i(".register").on("click",function(){window.location.href="/api/ext/user/registerPage?viewType=3"})})}},errorHandle:function(e,i){o.text("登录"),t.$errorPhone.text(i.info)},error:function(){o.text("登录"),t.$errorPhone.text("请求失败，请重试")}})),!1},setLoginAccount:function(e){var o=i(e.currentTarget),t=o.closest(".account-info"),n=(t.find(".sub-account").text(),t.data("userInfo")),r=t.data("smsToken");this.loginByAccount(n,r)},loginByAccount:function(e,o){i("#userName").val(e.userName),i("#smsToken").val(o),i("#phone-number-hidden").val(i.trim(this.$phoneNum.val())),i("#is-auto-login-hidden").val(i("#is-auto-login-phone").val()),i("#login-phone-submit-form").trigger("submit")},destroy:function(){}});window.phoneCallback=function(e){var o=i(".error-phone");if(e.errno&&e.e){switch(e.errno){case"131":o.text("验证码错误");break;case"132":o.text("请先修改密码再使用手机号登录");break;case"500":o.text("未知错误");break;case"502":o.text("参数错误");break;case"600":o.text("业务系统不允许登录");break;case"1007":o.text("账号已关闭");break;default:o.text("登陆超时异常")}i.post("/api/accessRecord/saveToPcLogin",{userName:i("#userName").val(),resultType:e.errno,srcType:2})}else e.redirecturl&&i.post("/api/accessRecord/saveToPcLogin",{userName:i("#userName").val(),resultType:0,srcType:2}).always(function(){window.location.href=location.protocol+"//mct.y.nuomi.com/index?page=true"})},window.ucCallback=function(e){var o=i("#login-error"),t=(i("#verify-token-container input"),[]);if(o.text(""),e.errno&&e.e){switch(e.errno){case"1005":o.text("请输入验证码");break;case"131":o.text("验证码错误");break;case"132":o.html('用户名密码错误，请重新输入或 <a href="/mct/findPwd/index?page=true" target="_blank">找回密码</a>');break;case"500":o.text("未知错误");break;case"502":o.text("参数错误");break;case"600":o.text("业务系统不允许登录");break;case"1007":o.text("账号已关闭");break;default:o.text("登陆超时异常")}i.post("/api/accessRecord/saveToPcLogin",{userName:i("#uc-common-account").val().replace(/\s/g,""),resultType:e.errno,srcType:9,failReason:t.join(",")}).always(function(){var e=i.cookie("mct_capt");e&&i("#login-acccount").trigger("loadVerifyCode")})}else e.redirecturl&&i.post("/api/accessRecord/saveToPcLogin",{userName:i("#uc-common-account").val().replace(/\s/g,""),srcType:9,resultType:0}).always(function(){window.location.href=location.protocol+"//mct.y.nuomi.com/index?page=true"});i("#uc-login #submit-form").prop("disabled",!1)},t.exports=new l});
//# sourceMappingURL=/static/login/js/newLogin.map